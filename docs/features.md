# csvpeek 機能一覧

## 概要

このドキュメントはcsvpeek (csvp) の機能一覧と実装状況を管理します。

- ステータス: `[ ]` 未実装 / `[x]` 実装済み
- 優先度: `MVP` 必須 / `v1.1` 次期 / `v1.2` 将来

---

## コア機能

### サブコマンド

| ステータス | 機能 | 説明 | 優先度 |
|:----------:|------|------|:------:|
| [x] | `summary` | 列のサマリー統計を表示（デフォルト） | MVP |
| [x] | `schema` | 列名・型推論・null率を表示 | MVP |

### 入力オプション

| ステータス | オプション | 説明 | 優先度 |
|:----------:|------------|------|:------:|
| [x] | `<FILE>` | CSVファイルパス（位置引数） | MVP |
| [x] | `--delimiter, -d` | 区切り文字指定（デフォルト: `,`） | v1.1 |
| [x] | `--no-header` | ヘッダーなしCSV対応 | v1.1 |
| [ ] | `--encoding` | 文字エンコーディング指定 | v1.2 |

### 列指定

| ステータス | オプション | 説明 | 優先度 |
|:----------:|------------|------|:------:|
| [x] | `--cols <COLS>` | カンマ区切りで列名指定 | MVP |
| [x] | 列名指定 | `--cols age,income` | MVP |
| [x] | インデックス指定 | `--cols 0,2,5` | v1.1 |
| [ ] | 範囲指定 | `--cols 0..5` | v1.2 |
| [x] | 全列（デフォルト） | `--cols` 省略時は全列対象 | MVP |

### フィルター (`--where`)

| ステータス | オプション | 説明 | 優先度 |
|:----------:|------------|------|:------:|
| [x] | `--where <EXPR>` | フィルター式 | MVP |
| [x] | 比較演算子 | `==`, `!=`, `<`, `<=`, `>`, `>=` | MVP |
| [x] | 論理演算子 | `&&`, `\|\|`, `!` | MVP |
| [x] | `contains()` | 部分文字列検索 | MVP |
| [x] | `in()` | 値リスト検索 | MVP |
| [x] | `is_null()` | NULL判定 | MVP |
| [x] | `is_not_null()` | 非NULL判定 | MVP |
| [ ] | 正規表現 | `matches()` | v1.1 |
| [ ] | 括弧グループ | `(a && b) \|\| c` | v1.1 |

---

## 統計機能 (summary)

### 基本統計

| ステータス | 統計項目 | 説明 | 優先度 |
|:----------:|----------|------|:------:|
| [x] | `count` | 非NULL行数 | MVP |
| [x] | `null_count` | NULL行数 | MVP |
| [x] | `null_rate` | NULL率 (%) | MVP |

### 数値統計

| ステータス | 統計項目 | 説明 | 優先度 |
|:----------:|----------|------|:------:|
| [x] | `min` | 最小値 | MVP |
| [x] | `max` | 最大値 | MVP |
| [x] | `mean` | 平均値 | MVP |
| [x] | `sum` | 合計 | v1.1 |
| [x] | `std` | 標準偏差 | v1.1 |
| [ ] | `median` | 中央値 | v1.2 |
| [ ] | `percentile` | パーセンタイル | v1.2 |

### 文字列統計

| ステータス | 統計項目 | 説明 | 優先度 |
|:----------:|----------|------|:------:|
| [x] | `min_len` | 最小文字列長 | v1.1 |
| [x] | `max_len` | 最大文字列長 | v1.1 |
| [x] | `unique_count` | ユニーク値数 | v1.1 |
| [ ] | `top_n` | 頻出値トップN | v1.2 |

---

## 出力機能

### 出力形式 (`--format, -f`)

| ステータス | 形式 | 説明 | 優先度 |
|:----------:|------|------|:------:|
| [x] | `table` | 整形テーブル（デフォルト） | MVP |
| [x] | `json` | JSON配列 | MVP |
| [x] | `ndjson` | 改行区切りJSON | v1.1 |
| [x] | `csv` | CSV形式 | v1.1 |

### 出力オプション

| ステータス | オプション | 説明 | 優先度 |
|:----------:|------------|------|:------:|
| [x] | `--output, -o` | 出力ファイル指定 | v1.1 |
| [ ] | `--quiet, -q` | 進捗表示抑制 | v1.1 |
| [ ] | `--color` | カラー出力制御 | v1.2 |

---

## schema コマンド

| ステータス | 機能 | 説明 | 優先度 |
|:----------:|------|------|:------:|
| [x] | 列名表示 | 全列の列名一覧 | MVP |
| [x] | 型推論 | integer/float/string/bool/date | MVP |
| [x] | null率表示 | 各列のNULL率 | MVP |
| [ ] | サンプル値 | 各列のサンプル値表示 | v1.1 |

---

## パフォーマンス

| ステータス | 機能 | 説明 | 優先度 |
|:----------:|------|------|:------:|
| [x] | ストリーム処理 | メモリ効率の良い逐次読み込み | MVP |
| [ ] | 進捗バー | 大規模ファイル処理時の進捗表示 | v1.1 |
| [ ] | 並列処理 | マルチスレッド集計 | v1.2 |

---

## エラーハンドリング

| ステータス | 機能 | 説明 | 優先度 |
|:----------:|------|------|:------:|
| [x] | ファイル不在エラー | 適切なエラーメッセージ | MVP |
| [x] | 列名不在エラー | 存在しない列指定時のエラー | MVP |
| [x] | パースエラー | 不正CSV行のスキップ/警告 | MVP |
| [x] | フィルター構文エラー | --where式の構文エラー表示 | MVP |

---

## 実装進捗サマリー

| カテゴリ | MVP | v1.1 | v1.2 | 実装済み |
|----------|:---:|:----:|:----:|:--------:|
| サブコマンド | 2 | 0 | 0 | 2 |
| 入力オプション | 1 | 2 | 1 | 3 |
| 列指定 | 3 | 1 | 1 | 4 |
| フィルター | 8 | 2 | 0 | 7 |
| 基本統計 | 3 | 0 | 0 | 3 |
| 数値統計 | 3 | 2 | 2 | 5 |
| 文字列統計 | 0 | 3 | 1 | 3 |
| 出力形式 | 2 | 2 | 0 | 4 |
| 出力オプション | 0 | 2 | 1 | 1 |
| schema | 3 | 1 | 0 | 3 |
| パフォーマンス | 1 | 1 | 1 | 1 |
| エラーハンドリング | 4 | 0 | 0 | 4 |
| **合計** | **30** | **16** | **7** | **40** |
